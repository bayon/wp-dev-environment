/*!
 * Name    : Advanced WordPress Backgrounds
 * Author  : nK https://nkdev.info
 */
!function(a){"use strict";function t(){d=s.width(),c=s.height()}function e(a,t){var e=a[0].getBoundingClientRect(),n=1;if(e.right<=0||e.left>=d)n=0;else if(e.bottom<0&&e.top<=c)n=0;else{var i=Math.max(0,e.height+e.top),r=Math.max(0,e.height-(e.top+e.height-c)),o=Math.max(0,-e.top),s=Math.max(0,e.top+e.height-c);e.height<c?n=1-(o||s)/e.height:i<=c?n=i/c:r<=c&&(n=r/c),n=n<0?0:n}return t?[n,e]:n}function n(t,e,n){var i,r,o;h.each(function(){var s=a(this);"object"==typeof(i=s.data("awb-mouse-data"))&&(i.is_in_viewport||n&&p)&&(n?(r=-i.size*t,o=-i.size*e):(r=(i.rect.width-(t-i.rect.left))/i.rect.width,o=(i.rect.height-(e-i.rect.top))/i.rect.height,(r>1||r<0||o>1||o<0)&&(r=.5,o=.5),r=i.size*(r-.5)*2,o=i.size*(o-.5)*2),n&&p?s.css({transform:"translateX("+r+"px) translateY("+o+"px) translateZ(0)"}):s.css({transition:"transform "+(n?2:i.speed)+"s  cubic-bezier(0.22, 0.63, 0.6, 0.88)",transform:"translateX("+r+"px) translateY("+o+"px) translateZ(0)"}))}),p=0}function i(t){clearTimeout(w),t?function(){var t=a(".nk-awb .nk-awb-wrap.nk-awb-mouse-parallax").children(".nk-awb-inner");t.length&&(h?h=t:(h=t,o&&window.DeviceOrientationEvent?s.on("deviceorientation",function(){requestAnimationFrame(function(){n(event.gamma/90,event.beta/180,!0)})}):s.on("mousemove",function(a){requestAnimationFrame(function(){n(a.clientX,a.clientY)})}))),h&&h.each(function(){var t=a(this),n=t.parent(),i=parseFloat(n.attr("data-awb-mouse-parallax-size"))||30,r=parseFloat(n.attr("data-awb-mouse-parallax-speed"))||1e4;t.data("awb-mouse-data",{is_in_viewport:e(n)?n.is(":visible"):0,rect:n[0].getBoundingClientRect(),size:i,speed:r/1e3}),t.css({left:-i,right:-i,top:-i,bottom:-i})})}():w=setTimeout(w,100)}function r(){a(".nk-awb:not(.wpb_column)").children('.nk-awb-wrap[data-awb-stretch="true"]').each(function(){var t=a(this),e=this.getBoundingClientRect(),n=e.left,i=d-e.right,r=parseFloat(t.css("margin-left")||0),o=parseFloat(t.css("margin-right")||0);t.css({"margin-left":r-n,"margin-right":o-i})}),a(".nk-awb.wpb_column").children('.nk-awb-wrap[data-awb-stretch="true"]').each(function(){var t=a(this),e=t.closest(".vc_row"),n=t.closest(".wpb_column"),i=this.getBoundingClientRect(),r=e[0].getBoundingClientRect(),o=n[0].getBoundingClientRect(),s=i.left,l=d-i.right,c=r.left+(parseFloat(e.css("padding-left"))||0),w=d-r.right+(parseFloat(e.css("padding-right"))||0),h=o.left,p=d-o.right,u={"margin-left":0,"margin-right":0};if(Math.round(c)==Math.round(h)){var g=parseFloat(t.css("margin-left")||0);u["margin-left"]=g-s}if(Math.round(w)==Math.round(p)){var b=parseFloat(t.css("margin-right")||0);u["margin-right"]=b-l}t.css(u)})}var o=/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/g.test(navigator.userAgent||navigator.vendor||window.opera),s=a(window),l=a(document),d=0,c=0;t(),s.on("resize load orientationchange",t),"undefined"!=typeof objectFitImages&&objectFitImages();var w,h=!1,p=1;s.on("resize scroll orientationchange load",i),setInterval(i,3e3),l.on("vc-full-width-row",function(){var t=Array.prototype.slice.call(arguments,1);t.length&&t.forEach(function(t){a(t).find(".nk-awb-rendered > .nk-awb-inner").each(function(){this.jarallax&&(this.jarallax.onResize(),this.jarallax.onScroll())})})}),window.nk_awb_init=function(){a(".nk-awb .nk-awb-wrap[data-awb-mouse-parallax-size]").addClass("nk-awb-mouse-parallax"),i(!0),a(".nk-awb-after-vc_row").each(function(){var t=a(this),e=t.prev(".vc_clearfix"),n=((e=!!e.length&&e)||t).prev(".vc_row:not(.nk-awb)");if(n.length){var i=t.children(".nk-awb-wrap");n.is("[data-vc-full-width=true]")&&i.removeAttr("data-awb-stretch"),n.addClass("nk-awb"),n.append(i)}t.remove()}),a(".nk-awb-after-vc_column").each(function(){var t=a(this),e=t.prev(".wpb_column:not(.nk-awb)"),n=e.closest(".vc_row");if(e.length){var i=t.children(".nk-awb-wrap");n.is("[data-vc-stretch-content=true]")&&i.removeAttr("data-awb-stretch"),e.addClass("nk-awb"),e.append(i)}t.remove()}),r(),void 0!==a.fn.jarallax&&a(".nk-awb .nk-awb-wrap:not(.nk-awb-rendered)").each(function(){var t=a(this).addClass("nk-awb-rendered"),e=t.attr("data-awb-type"),n=t.attr("data-awb-image-background-size"),i=t.attr("data-awb-image-background-position"),r=!1,o=0,s=0,l=0,d=!0,c=t.attr("data-awb-parallax"),w=t.attr("data-awb-parallax-speed"),h="false"!==t.attr("data-awb-parallax-mobile");if("yt_vm_video"!==e&&"video"!==e||(r=t.attr("data-awb-video"),o=parseFloat(t.attr("data-awb-video-start-time"))||0,s=parseFloat(t.attr("data-awb-video-end-time"))||0,l=parseFloat(t.attr("data-awb-video-volume"))||0,d="true"===t.attr("data-awb-video-always-play")),c||r){var p={type:c,speed:w,noAndroid:!h,noIos:!h,imgSize:n||"cover",imgPosition:i||"50% 50%"};"pattern"===n&&(p.imgSize="auto",p.imgRepeat="repeat"),r&&(p.speed=c?w:1,p.videoSrc=r,p.videoStartTime=o,p.videoEndTime=s,p.videoVolume=l,p.videoPlayOnlyVisible=!d),t.children(".nk-awb-inner").jarallax(p)}})},window.nk_awb_init(),s.on("ready load",function(){window.nk_awb_init()}),s.on("resize orientationchange",r)}(jQuery);